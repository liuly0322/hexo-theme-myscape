<% if (config.disqus_shortname){ %>
<script>
  var disqus_shortname = '<%= config.disqus_shortname %>';
  <% if (page.permalink){ %>
  var disqus_url = '<%= page.permalink %>';
  <% } %>
  (function(){
    var dsq = document.createElement('script');
    dsq.async = true;
    dsq.src = 'https://' + disqus_shortname + '.disqus.com/<% if (page.comments) { %>embed.js<% } else { %>count.js<% } %>';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<% } %>

<%- js('js/jquery-3.4.1.min.js') %>

<% if (theme.fancybox){ %>
  <%- js('fancybox/jquery.fancybox.min.js') %>
<% } %>

<%- js('js/script') %>

<%- js('js/local-search') %>

<%- partial('gauges-analytics') %>

<% if(theme.valine.enable && theme.valine.appId && theme.valine.appKey){ %>
  <%- js('https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.Pure.min.js') %>
<script>
    var notify = '<%= theme.valine.notify %>' == true;
    var verify = '<%= theme.valine.verify %>' == true;
    new Valine({
        el: '.vc',
        appId: "<%= theme.valine.appId %>",
        appKey: "<%= theme.valine.appKey %>",
        placeholder: "<%= theme.valine.placeholder %>",
        pageSize:'<%= theme.valine.pageSize %>',
        avatar:'<%= theme.valine.avatar %>'
    });
</script>
<% } %>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.12.3/dist/tocbot.css">
<style>
  .toc-list{
    padding: 0;
  }
  #menu-wrap.toc-fixed{
    position: fixed;
    top: calc(1em - 50px);
    margin-right: 20px;
    width: 23%;
    max-width: 285px;
  }
  #menu-wrap .menu-box{
    position: relative;
    overflow: hidden;
  }
</style>
<script src="https://cdn.jsdelivr.net/npm/tocbot@4.12.3/dist/tocbot.min.js"></script>
<script>
  tocbot.init({
    tocSelector: '#menu',
    contentSelector: '.e-content',
    headingSelector: 'h2, h3, h4',
    hasInnerContainers: false,
  });
  if (document.querySelector('#menu').innerHTML !== '' &&
    window.matchMedia('(min-width: 768px)').matches) {
    document.querySelector('#menu-wrap').style.display = 'block';
  }
</script>